<mat-drawer-container class="drawer-container">
  <mat-drawer #profileDrawer mode="side" opened class="side-drawer">
    <div class="pb-2">
      <div fxLayoutAlign="end">
        <button mat-icon-button (click)="profileDrawer.toggle()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <h1 style="text-align: center;">{{pet?.name}}</h1>
      <mat-list>
        <mat-list-item>Especie: {{pet?.species || 'N/A'}} </mat-list-item>
        <mat-list-item>Raza: {{pet?.race || 'N/A'}} </mat-list-item>
        <mat-list-item>Sexo: {{pet && getPetSex(pet.sex)}} </mat-list-item>
        <mat-list-item>Color: {{pet?.color || 'N/A'}} </mat-list-item>
        <mat-list-item>Edad: {{getAgeToString(getAge(pet?.birthday)) || 'N/A'}} </mat-list-item>
        <mat-divider></mat-divider>
      </mat-list>
      <h2 class="mt-1" style="text-align: center;">Dueño</h2>
      <mat-list>
        <mat-list-item>Nombre: {{customer?.name || 'N/A'}} </mat-list-item>
        <mat-list-item>CI: {{customer?.ci || 'N/A'}} </mat-list-item>
        <mat-list-item>Teléfono: {{customer?.phone || 'N/A'}} </mat-list-item>
        <mat-list-item>Dirección: {{customer?.address || 'N/A'}} </mat-list-item>
      </mat-list>
    </div>
  </mat-drawer>

  <div>
    <button mat-button (click)="profileDrawer.toggle()" *ngIf="!profileDrawer.opened">
      <mat-icon>menu</mat-icon>
      Menú
    </button>
    <div class="content-90 pt-1 pb-2">
      <div fxLayout="row wrap" fxLayoutAlign="space-evenly">
        <mat-card class="action-card mb-1" appMaterialElevation [canSelect]="true" *ngFor="let action of actions"
          (click)="action.click()">
          <div fxLayout="column" fxLayoutAlign="center center" [style.background-color]="action.bgColor"
            [style.color]="action.color">
            <mat-icon class="icon-2x mt-1 mb-1">{{action.icon}}</mat-icon>
            <h4 class="text-center">{{action.title}}</h4>
          </div>
        </mat-card>
      </div>

      <h1>Próximas Citas</h1>
      <table mat-table [dataSource]="pendingAppts" class="table mat-elevation-z4 mb-2">
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Fecha</th>
          <td mat-cell *matCellDef="let appt">{{convertDateFormat(appt.date, '', 'DD-MM-YYYY')}}</td>
        </ng-container>
        <ng-container matColumnDef="time">
          <th mat-header-cell *matHeaderCellDef>Hora</th>
          <td mat-cell *matCellDef="let appt">{{convertDateFormat(appt.date, '', 'hh:mm A')}}</td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Descripción</th>
          <td mat-cell *matCellDef="let appt">{{appt.description}}</td>
        </ng-container>
        <ng-container matColumnDef="vet">
          <th mat-header-cell *matHeaderCellDef>Veterinaria</th>
          <td mat-cell *matCellDef="let appt">{{appt.vet.data.attributes.name}}</td>
        </ng-container>
        <ng-container matColumnDef="employees">
          <th mat-header-cell *matHeaderCellDef>Doctores / Empleados</th>
          <td mat-cell *matCellDef="let appt">{{getEmployeesNames(appt.employees)}}</td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let appt" fxLayoutGap="5px">
            <button mat-raised-button color="primary" (click)="markApptAsCompleted(appt)">
              Completada
            </button>
            <button mat-raised-button color="warn" (click)="markApptAsCanceled(appt)">
              Cancelada
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="apptsTableCols"></tr>
        <tr mat-row *matRowDef="let row; columns: apptsTableCols"></tr>

        <!-- No Matches Found Row -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No hay citas próximas</td>
        </tr>

      </table>
    </div>
  </div>
</mat-drawer-container>
